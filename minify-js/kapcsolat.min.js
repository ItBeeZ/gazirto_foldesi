const hamburger=document.querySelector(".hamburger"),navMenu=document.querySelector(".nav-menu"),navLinks=document.querySelectorAll(".nav-link"),contactForm=document.getElementById("contactForm"),formSuccess=document.getElementById("formSuccess"),faqItems=document.querySelectorAll(".faq-item");function validateField(e,t,n){const r=e.value.trim(),s=document.getElementById(e.name+"Error");return t(r)?(e.classList.remove("error"),e.classList.add("success"),s.textContent="",!0):(e.classList.remove("success"),e.classList.add("error"),s.textContent=n,!1)}hamburger?.addEventListener("click",(()=>{hamburger.classList.toggle("active"),navMenu.classList.toggle("active")})),navLinks.forEach((e=>{e.addEventListener("click",(()=>{hamburger?.classList.remove("active"),navMenu?.classList.remove("active")}))})),window.addEventListener("scroll",(()=>{const e=document.querySelector(".navbar");window.scrollY>50?(e.style.background="rgba(255, 255, 255, 0.98)",e.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.15)"):(e.style.background="rgba(255, 255, 255, 0.95)",e.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.1)")}));const validators={name:e=>e.length>=2,email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),phone:e=>""===e||/^[\+]?[0-9\s\-\(\)]{10,}$/.test(e),message:e=>e.length>=10},errorMessages={name:"A n√©v legal√°bb 2 karakter hossz√∫ legyen",email:"K√©rj√ºk, adjon meg egy √©rv√©nyes e-mail c√≠met",phone:"K√©rj√ºk, adjon meg egy √©rv√©nyes telefonsz√°mot",message:"Az √ºzenet legal√°bb 10 karakter hossz√∫ legyen"};if(contactForm){contactForm.querySelectorAll("input, textarea, select").forEach((e=>{validators[e.name]&&(e.addEventListener("blur",(()=>{validateField(e,validators[e.name],errorMessages[e.name])})),e.addEventListener("input",(()=>{e.classList.contains("error")&&validateField(e,validators[e.name],errorMessages[e.name])})))}))}contactForm&&contactForm.addEventListener("submit",(async e=>{e.preventDefault();let t=!0;const n=new FormData(contactForm),r=document.getElementById("name"),s=document.getElementById("email"),o=document.getElementById("message");validateField(r,validators.name,errorMessages.name)||(t=!1),validateField(s,validators.email,errorMessages.email)||(t=!1),validateField(o,validators.message,errorMessages.message)||(t=!1);const a=document.getElementById("phone");if(""!==a.value.trim()&&(validateField(a,validators.phone,errorMessages.phone)||(t=!1)),!t){const e=contactForm.querySelector(".error");return void(e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus()))}const l=contactForm.querySelector('button[type="submit"]'),c=l.innerHTML;l.classList.add("loading"),l.disabled=!0,l.innerHTML='<i class="fas fa-spinner fa-spin"></i> K√ºld√©s...';try{"function"==typeof initializeEmailJS&&initializeEmailJS();const e=await sendEmailViaEmailJS(n);if(!e.success)throw new Error(e.error||"Ismeretlen hiba t√∂rt√©nt");contactForm.style.display="none",formSuccess.classList.add("show"),formSuccess.scrollIntoView({behavior:"smooth",block:"center"}),contactForm.reset();contactForm.querySelectorAll("input, textarea, select").forEach((e=>{e.classList.remove("error","success")}))}catch(e){console.error("Form submission error:",e);let t="Hiba t√∂rt√©nt az √ºzenet k√ºld√©se sor√°n. ";e.message.includes("EmailJS nincs bet√∂ltve")?t+="Az email szolg√°ltat√°s nem √©rhet≈ë el. K√©rj√ºk, pr√≥b√°lja √∫jra k√©s≈ëbb, vagy vegye fel vel√ºnk a kapcsolatot telefonon.":e.message.includes("T√∫l sok k√©r√©s")?t+="T√∫l sok √ºzenetet k√ºld√∂tt r√∂vid id≈ën bel√ºl. K√©rj√ºk, v√°rjon n√©h√°ny percet, majd pr√≥b√°lja √∫jra.":e.message.includes("Hiteles√≠t√©si hiba")?t+="Technikai probl√©ma l√©pett fel. K√©rj√ºk, vegye fel vel√ºnk a kapcsolatot telefonon.":t+="K√©rj√ºk, ellen≈ërizze az internetkapcsolat√°t √©s pr√≥b√°lja √∫jra, vagy vegye fel vel√ºnk a kapcsolatot telefonon.";const n=document.createElement("div");n.className="form-error",n.innerHTML=`\n                <i class="fas fa-exclamation-triangle"></i>\n                <p>${t}</p>\n                <p><strong>Alternat√≠v el√©rhet≈ës√©gek:</strong></p>\n                <p>üìû 06-30/460-3898</p>\n                <p>üìß gazirtokertesz@gmail.com</p>\n            `,contactForm.parentNode.insertBefore(n,contactForm),n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n)}),1e4)}finally{l.classList.remove("loading"),l.disabled=!1,l.innerHTML=c}})),faqItems.forEach((e=>{e.querySelector(".faq-question").addEventListener("click",(()=>{const t=e.classList.contains("active");faqItems.forEach((e=>{e.classList.remove("active")})),t||e.classList.add("active")}))}));const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("visible")}))}),observerOptions);function setCurrentYear(){const e=(new Date).getFullYear(),t=document.getElementById("current-year");t&&(t.textContent=e)}document.addEventListener("DOMContentLoaded",(()=>{setCurrentYear();document.querySelectorAll(".contact-form-container, .contact-item, .faq-item, .hero-content, .map-container").forEach((e=>{e.classList.add("fade-in"),observer.observe(e)}))})),navLinks.forEach((e=>{e.addEventListener("click",(t=>{const n=e.getAttribute("href");if(n.startsWith("#")){t.preventDefault();const e=document.querySelector(n);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}}))})),document.querySelectorAll(".contact-item").forEach((e=>{e.addEventListener("mouseenter",(()=>{e.style.transform="translateY(-2px) scale(1.02)";const t=e.querySelector(".contact-icon");t&&(t.style.transform="scale(1.1) rotate(5deg)")})),e.addEventListener("mouseleave",(()=>{e.style.transform="translateY(0) scale(1)";const t=e.querySelector(".contact-icon");t&&(t.style.transform="scale(1) rotate(0deg)")}))})),document.querySelectorAll(".social-links a").forEach((e=>{e.addEventListener("mouseenter",(()=>{e.style.transform="translateY(-2px) scale(1.1) rotate(5deg)"})),e.addEventListener("mouseleave",(()=>{e.style.transform="translateY(0) scale(1) rotate(0deg)"}))})),window.addEventListener("scroll",(()=>{const e=window.pageYOffset,t=document.querySelector(".hero");t&&(t.style.transform=`translateY(${.5*e}px)`)})),window.addEventListener("load",(()=>{const e=document.querySelector(".hero-content");e&&(e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout((()=>{e.style.transition="all 1s ease",e.style.opacity="1",e.style.transform="translateY(0)"}),300))})),window.addEventListener("load",(()=>{document.querySelectorAll(".nav-link").forEach(((e,t)=>{e.style.opacity="0",e.style.transform="translateY(-20px)",setTimeout((()=>{e.style.transition="all 0.5s ease",e.style.opacity="1",e.style.transform="translateY(0)"}),100*t)}))})),document.querySelectorAll(".btn").forEach((e=>{e.addEventListener("click",(function(e){if(this.classList.contains("loading"))return;const t=document.createElement("span"),n=this.getBoundingClientRect(),r=Math.max(n.width,n.height),s=e.clientX-n.left-r/2,o=e.clientY-n.top-r/2;t.style.width=t.style.height=r+"px",t.style.left=s+"px",t.style.top=o+"px",t.classList.add("ripple"),this.appendChild(t),setTimeout((()=>{t.remove()}),600)}))}));const rippleStyle=document.createElement("style");rippleStyle.textContent="\n    .btn {\n        position: relative;\n        overflow: hidden;\n    }\n    \n    .ripple {\n        position: absolute;\n        border-radius: 50%;\n        background: rgba(255, 255, 255, 0.6);\n        transform: scale(0);\n        animation: ripple-animation 0.6s linear;\n        pointer-events: none;\n    }\n    \n    @keyframes ripple-animation {\n        to {\n            transform: scale(4);\n            opacity: 0;\n        }\n    }\n",document.head.appendChild(rippleStyle);const createScrollProgress=()=>{const e=document.createElement("div");e.className="scroll-progress",document.body.appendChild(e),window.addEventListener("scroll",(()=>{const t=document.documentElement.scrollTop/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;e.style.width=t+"%"}))};createScrollProgress();const footer=document.querySelector(".footer");if(footer){const e=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){footer.querySelectorAll(".footer-section").forEach(((e,t)=>{setTimeout((()=>{e.style.opacity="1",e.style.transform="translateY(0)"}),200*t)}))}}))}),{threshold:.1});footer.querySelectorAll(".footer-section").forEach((e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="all 0.6s ease"})),e.observe(footer)}const mapSvg=document.querySelector(".map-svg");if(mapSvg){new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const e=mapSvg.querySelector('path[d*="M200 135"]');e&&(e.style.animation="bounce 1s ease-in-out 3")}}))}),{threshold:.5}).observe(mapSvg)}const bounceStyle=document.createElement("style");bounceStyle.textContent="\n    @keyframes bounce {\n        0%, 20%, 50%, 80%, 100% {\n            transform: translateY(0);\n        }\n        40% {\n            transform: translateY(-10px);\n        }\n        60% {\n            transform: translateY(-5px);\n        }\n    }\n",document.head.appendChild(bounceStyle);const formFields=document.querySelectorAll(".form-group input, .form-group select, .form-group textarea");formFields.forEach((e=>{e.addEventListener("focus",(()=>{e.parentElement.style.transform="translateY(-2px)"})),e.addEventListener("blur",(()=>{e.parentElement.style.transform="translateY(0)"}))}));const messageTextarea=document.getElementById("message");messageTextarea&&messageTextarea.addEventListener("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}));let ticking=!1;function updateOnScroll(){const e=document.querySelector(".navbar");window.scrollY>50?(e.style.background="rgba(255, 255, 255, 0.98)",e.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.15)"):(e.style.background="rgba(255, 255, 255, 0.95)",e.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.1)");const t=window.pageYOffset,n=document.querySelector(".hero");n&&(n.style.transform=`translateY(${.3*t}px)`),ticking=!1}window.addEventListener("scroll",(()=>{ticking||(requestAnimationFrame(updateOnScroll),ticking=!0)})),faqItems.forEach(((e,t)=>{const n=e.querySelector(".faq-question");n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.setAttribute("aria-expanded","false"),n.addEventListener("keydown",(e=>{if("Enter"===e.key||" "===e.key)e.preventDefault(),n.click();else if("ArrowDown"===e.key){e.preventDefault();const n=(t+1)%faqItems.length;faqItems[n].querySelector(".faq-question").focus()}else if("ArrowUp"===e.key){e.preventDefault();const n=(t-1+faqItems.length)%faqItems.length;faqItems[n].querySelector(".faq-question").focus()}}));new MutationObserver((()=>{const t=e.classList.contains("active");n.setAttribute("aria-expanded",t.toString())})).observe(e,{attributes:!0,attributeFilter:["class"]})}));